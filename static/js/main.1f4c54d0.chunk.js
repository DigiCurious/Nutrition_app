(this.webpackJsonpnutrition=this.webpackJsonpnutrition||[]).push([[0],{10:function(e,t,a){},11:function(e,t,a){},76:function(e,t,a){e.exports=a(81)},81:function(e,t,a){"use strict";a.r(t);var n=a(24),r=a(8),i=a(2),s=a(3),o=a(6),l=a(4),c=a(5),u=a(0),m=a.n(u),h=a(32),p=a.n(h),d=(a(10),a(11),a(1)),g=a.n(d),v=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return m.a.createElement("div",{className:"col addNew"},m.a.createElement("form",{className:"form-inline",onSubmit:function(t){return e.props.onSubmit(t)}},m.a.createElement("div",{id:"recipeName",className:"form-group mb-2"},m.a.createElement("label",null,"Recipe Name"),m.a.createElement("input",{id:"recipeName",className:"form-control",onChange:function(t){return e.props.onChange(t)}})),m.a.createElement("div",{className:"form-group mb-2"},m.a.createElement("button",{type:"submit",className:"btn btn-block btn-primary"},"Create a new recipe"))))}}]),t}(m.a.Component),f=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return m.a.createElement("tr",{id:this.props.idForRow},["breakfast","lunch","dinner"].map((function(t,a){var n="";return e.props.mealplan.meals.map((function(a){a.time===t&&e.props.mealplan.meals.length>0&&(n=a.recipe.name)})),m.a.createElement("td",{id:t,draggable:!0,onDrag:e.props.onDrag,className:"meal",onDrop:e.props.onDrop,onDragOver:e.props.onDragOver,onClick:e.props.onClick},n)})),m.a.createElement("td",null,m.a.createElement("button",{className:"btn btn-block btn-primary",onClick:function(t,a){e.props.onClickMinus(t,e.props.mealplan.meals),e.props.setCounter()}}," - ")))}}]),t}(m.a.Component),b=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={dayCounter:"1"},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"setCounter",value:function(){console.log(this.state);var e=this.state.dayCounter-1;this.setState({dayCounter:e})}},{key:"render",value:function(){for(var e=this,t=[],a=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],n=0;n<this.state.dayCounter;n++)t.push(m.a.createElement(f,{key:n,onDrag:this.props.onDrag,idForRow:a[n],onDrop:this.props.onDrop,onDragOver:this.props.onDragOver,onClick:this.props.onClick,onClickMinus:this.props.deleteRow,setCounter:this.setCounter.bind(this),mealplan:this.props.mealplan}));return m.a.createElement("div",null,m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-2"},m.a.createElement("h2",null,"Meal Plan")),m.a.createElement("div",{className:"col"},m.a.createElement("button",{className:"btn btn-primary",onClick:this.props.mealPlanIngredients},"Click to see the nutrients"))),m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col-11"},m.a.createElement("table",{className:"table"},m.a.createElement("thead",null,m.a.createElement("tr",null,["breakfast","lunch","dinner"].map((function(e){return m.a.createElement("th",{scope:"col-4"},e)})))),m.a.createElement("tbody",null,t))),m.a.createElement("div",{className:"col-1"},m.a.createElement("input",{value:this.state.dayCounter,onChange:function(t){return e.setState({dayCounter:t.target.value})},className:"form-control",type:"number",name:"quantity",min:"1",max:"7"}))))}}]),t}(m.a.Component),y=a(12),C=a(7),E=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return m.a.createElement("div",{className:"row searchBar"},m.a.createElement("div",{className:"col-5"},m.a.createElement("form",null,m.a.createElement("div",{className:"form-group"},m.a.createElement("input",{className:"form-control",value:this.props.filterText,onChange:function(t){e.props.onChange(t.target.value)}})))))}}]),t}(m.a.Component),k=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={filterText:""},a.drawBarChart=a.drawBarChart.bind(Object(y.a)(a)),a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.drawBarChart()}},{key:"componentDidUpdate",value:function(){this.drawBarChart()}},{key:"handleFilter",value:function(){var e=this;return Object(r.a)(this.props.dataSet).filter((function(t){return t.name.includes(e.state.filterText)}))}},{key:"drawBarChart",value:function(){var e=this.handleFilter(),t=.75*g()(".bargraph").width(),a=50*e.length;C.h(this.refs.bargraph).selectAll("svg").remove();var n=C.h(this.refs.bargraph).append("svg").attr("width","100%").attr("height",a),r=[];e.map((function(e){r.push(e.amount)}));var i=C.f().domain([C.d(r),C.c(r)]).range([1,t]).clamp(!1),s=a/e.length-5;n.selectAll("rect").data(e).enter().append("rect").attr("y",(function(e,t){return t*(s+5)})).attr("x",t/3).attr("height",s).attr("width",(function(e){return i(e.amount)+"px"})).attr("fill","blue"),n.selectAll("text").data(e).enter().append("text").attr("x",10).attr("y",(function(e,t){return t*(s+5)+s/2})).text((function(e){return e.name}))}},{key:"render",value:function(){var e=this;return m.a.createElement("div",{className:"bargraph",ref:"bargraph"},m.a.createElement(E,{filterText:this.state.filterText,onChange:function(t){e.setState({filterText:t})}}))}}]),t}(u.Component),O=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).drawMacros=a.drawMacros.bind(Object(y.a)(a)),a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.drawMacros()}},{key:"componentDidUpdate",value:function(){this.drawMacros()}},{key:"drawMacros",value:function(){var e=Math.min(450,450)/2-40;C.h(this.refs.piegraph).selectAll("svg").remove();var t=C.h(this.refs.piegraph).append("svg").attr("width",450).attr("height",450).append("g").attr("transform","translate(225,225)"),a=this.props.dataSet,n=0;a.forEach((function(e){n+=e.amount}));var r=[];a.forEach((function(e){r.push(e.amount/n*100)}));var i=C.g().domain(r).range(["#98abc5","#8a89a6","#7b6888"]),s=C.e().value((function(e){return e.value}))(C.b(r));t.selectAll("sector").data(s).enter().append("path").attr("d",C.a().innerRadius(100).outerRadius(e)).attr("fill",(function(e){return i(e.data.key)}))}},{key:"render",value:function(){return m.a.createElement("div",{className:"piegraph",ref:"piegraph"})}}]),t}(u.Component),N=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return m.a.createElement("div",null,m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col"},m.a.createElement("h2",null,"Nutrients of ",this.props.title))),m.a.createElement("nav",null,m.a.createElement("ul",{className:"nav nav-tabs"},m.a.createElement("li",{className:"active nav-item",onClick:function(t){return e.props.hideCategory(t)}},"Micros"),m.a.createElement("li",{className:"nav-item",onClick:function(t){return e.props.hideCategory(t)}},"Macros"))),m.a.createElement("div",{id:"Macros",className:"nutrients hide"},m.a.createElement(O,{dataSet:this.props.filterData(this.props.nutrients,"macro")})),m.a.createElement("div",{id:"Micros",className:"nutrients"},m.a.createElement(k,{dataSet:this.props.filterData(this.props.nutrients,"micro")})))}}]),t}(m.a.Component),j=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return m.a.createElement("div",{id:this.props.id,className:"row ingredient"},m.a.createElement("div",{className:"col-3"},m.a.createElement("p",{onClick:function(){return e.props.setMicros(e.props.name)}},this.props.name)),m.a.createElement("div",{className:"col slidecontainer"},m.a.createElement("input",{"data-index":this.props.id,type:"range",min:"0",max:"100",value:this.props.amount,className:"slider",id:"myRange",onChange:this.props.onChange})),m.a.createElement("div",{className:"col-1"},m.a.createElement("p",null,this.props.amount)),m.a.createElement("div",{className:"col-2"},m.a.createElement("button",{className:"btn btn-block btn-primary",onClick:function(){return e.props.remove(e.props.id)}},"-")))}}]),t}(m.a.Component),M=[];function D(e){return{name:"ingredient"+e,id:e,amount:Math.round(100*Math.random()),nutrients:{calcium:{amount:Math.round(Math.random())/4,category:"micro",subCategory:"minerals"},magnesium:{amount:Math.round(Math.random())/4,category:"micro",subCategory:"minerals"},potassium:{amount:Math.round(Math.random())/4,category:"micro",subCategory:"minerals"},vitaminB12:{amount:Math.round(Math.random())/4,category:"micro",subCategory:"vitamins"},vitaminD:{amount:Math.round(Math.random())/4,category:"micro",subCategory:"vitamins"},vitaminC:{amount:Math.round(Math.random())/4,category:"micro",subCategory:"vitamins"},zinc:{amount:Math.round(Math.random())/4,category:"micro",subCategory:"minerals"},iron:{amount:Math.round(Math.random())/4,category:"micro",subCategory:"minerals"},dailyCal:{amount:Math.round(Math.random())/4,category:"micro",subCategory:"minerals"},protein:{amount:Math.floor(33*Math.random()),category:"macro"},fat:{amount:Math.floor(33*Math.random()),category:"macro"},carbs:{amount:Math.floor(33*Math.random()),category:"macro"}}}}for(var w=0;w<10;w++)M.push(D(w));function S(e){var t={};return e.map((function(e){!function(e,t){Object.keys(e.nutrients).map((function(a){t[a]?t[a]+=e.amount*e.nutrients[a].amount:t[a]=e.amount*e.nutrients[a].amount}))}(e,t)})),t}var I=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={nameBar:"",recipe:{name:"Lasagne",ingredients:M},nutrients:S(M),hover:"",meal:null,mealplan:{meals:[],nutrients:{}},filterText:"",d3:""},a}return Object(c.a)(t,e),Object(s.a)(t,[{key:"setMicrosPerIngredient",value:function(e){var t=S(this.state.recipe.ingredients.filter((function(t){return t.name==e})));this.setState({recipe:{name:this.state.recipe.name,ingredients:this.state.recipe.ingredients,nutrients:t},barGraphTitle:e})}},{key:"handleSubmit",value:function(e){e.preventDefault();for(var t=this.state.nameBar,a=[],n=0;n<10;n++)a.push(D(n));var r=S(a);this.setState({recipe:{name:t,ingredients:a},nutrients:r,barGraphTitle:t})}},{key:"checkNutPerIngredient",value:function(e){var t=this.state.recipe.ingredients[0];this.state.recipe.ingredients.map((function(a,n){a.amount>0&&e.length>2&&a.amount*a.nutrients[e].amount>a.amount*t.nutrients[e].amount&&(t=a)}));var a=e.length>2?t.id:null;if(null!==a){var n=a.toString();g()("#"+n).find(".slider").addClass("highlight")}}},{key:"highlightIngredient",value:function(e,t){g()(".bargraphs").find("p").removeClass("highlight-text"),g()(e.target).addClass("highlight-text"),this.setState({hover:t}),this.state.hover.length>0&&this.checkNutPerIngredient(t)}},{key:"setNewIds",value:function(e){e.map((function(e,t){return e.id=t}))}},{key:"removeHighlights",value:function(){g()(".slidecontainer").find(".slider").removeClass("highlight"),g()(".highlight").removeClass("highlight"),g()(".highlight-text").removeClass("highlight-text"),this.setState({hover:""})}},{key:"handleChange",value:function(e){var t=this.state.recipe.ingredients.slice();t[e.target.getAttribute("data-index")].amount=Number(e.target.value);var a=S(t);this.setState({recipe:{name:this.state.recipe.name,ingredients:t},nutrients:a})}},{key:"hideCategory",value:function(e){g()(".nutrientTab").removeClass("active"),g()(e.target).addClass("active"),g()(".nutrients").addClass("hide"),g()("#"+e.target.innerText).removeClass("hide")}},{key:"minimize",value:function(e){g()(e.target).prev().toggleClass("hide"),this.setState({mealplan:this.state.mealplan})}},{key:"handleDelete",value:function(e){var t=Object(r.a)(this.state.recipe.ingredients).filter((function(t){return t.id!=e})),a=S(t);this.setNewIds(this.state.recipe.ingredients),this.setState({recipe:{name:this.state.recipe.name,ingredients:t},nutrients:a})}},{key:"deleteMeal",value:function(e,t){console.log("REMOVE");var a=[];t.length>1?a=Object(r.a)(t):a.push(t[0]),console.log(e.target.id);var n=g()(e.target).parent()[0].id;console.log(n),console.log(g()("#"+n).find(g()("#"+e.target.id))[0]);var i=[];a.map((function(t,a){t.time===e.target.id&&t.day===n||i.push(t)}));var s=this.mealPlanIngredients(i);this.setState({mealplan:{meals:i,nutrients:s}});var o=document.getElementById(n).querySelector("#"+e.target.id);console.log(o),g()(o).removeClass("meal-is-in")}},{key:"deleteRow",value:function(e,t){console.log("REMOVE"),console.log(t),console.log(g()(e.target).parent().parent());var a=[];t.length>1?a=Object(r.a)(t):a.push(t[0]);var n=g()(e.target).parent().parent()[0].id;console.log(n);var i=[];a.map((function(e,t){e.day!==n&&i.push(e)}));var s=this.mealPlanIngredients(i);this.setState({mealplan:{meals:i,nutrients:s}})}},{key:"addIngredient",value:function(){var e=Object(r.a)(this.state.recipe.ingredients);e.push(D(this.state.recipe.ingredients.length));var t=S(e);this.setState({recipe:{name:this.state.recipe.name,ingredients:e},nutrients:t,hover:""})}},{key:"onDragRecipe",value:function(e,t){var a={recipe:{name:this.state.recipe.name,ingredients:this.state.recipe.ingredients,nutrients:this.state.nutrients},barGraphTitle:this.state.barGraphTitle,day:"",time:""};e.preventDefault(),this.setState({meal:a})}},{key:"onDragMeal",value:function(e){var t=e.target.id;g()("#"+t).keydown((function(e){91==e.keyCode&&(g()("#"+t).removeClass("meal-is-in"),console.log("POHJASSA"))}));var a=Object(r.a)(this.state.mealplan.meals).filter((function(e){return e.time==t}));e.preventDefault(),this.setState({meal:a[0]})}},{key:"onDragOver",value:function(e,t){g()(".highlight").removeClass("highlight"),e.preventDefault(),g()(e.target).addClass("highlight")}},{key:"onDropMeal",value:function(e,t){if(g()(".highlight").removeClass("highlight"),!g()(e.target).hasClass("meal-is-in")){console.log(e.target.id),g()(e.target).addClass("meal-is-in");var a=Object(n.a)({},t);a.day=e.target.parentElement.id,a.time=e.target.id;var i=Object(r.a)(this.state.mealplan.meals);i.push(a),this.setState({mealplan:{meals:i,nutrients:this.state.mealplan.nutrients}})}}},{key:"onDropRecipe",value:function(e,t){this.removeHighlights(),this.setState({recipe:{name:t.recipe.name,ingredients:t.recipe.ingredients},nutrients:t.recipe.nutrients,barGraphTitle:t.recipe.name})}},{key:"filterCategories",value:function(e,t){var a=this,n=[];return Object.keys(e).map((function(r){if(a.state.recipe.ingredients[0].nutrients[r].category===t){var i={};i.name=r,i.amount=e[r],n.push(i)}})),n}},{key:"mealPlanIngredients",value:function(e){console.log(e);var t=Object.keys(this.state.nutrients),a=Object(n.a)({},this.state.nutrients);this.state.mealplan.meals.map((function(e,n){console.log("we are here"),console.log(e);var r=function(e){var a={calcium:0,magnesium:0,potassium:0,vitaminB12:0,vitaminD:0,vitaminC:0,zinc:0,iron:0,dailyCal:0,protein:0,fat:0,carbs:0};return t.map((function(t){a[t]+=e.recipe.nutrients[t]})),a}(e);t.map((function(e){0==n?a[e]=r[e]:a[e]+=r[e]})),console.log(a)})),this.setState({nutrients:a,mealplan:{meals:this.state.mealplan.meals,nutrients:a}})}},{key:"render",value:function(){var e=this;console.log(this.state.mealplan),this.setNewIds(this.state.recipe.ingredients),this.checkNutPerIngredient(this.state.hover);return m.a.createElement("div",null,m.a.createElement("div",{className:"row"},m.a.createElement(v,{onSubmit:function(t){return e.handleSubmit(t)},onChange:function(t){return e.setState({nameBar:t.target.value})}})),m.a.createElement("div",{className:"row"},m.a.createElement("div",{className:"col ingredients ui-box",id:"recipe",onDrop:function(t,a){return e.onDropRecipe(t,e.state.meal)},onDragOver:function(t,a){return e.onDragOver(t,"ingredients")}},m.a.createElement("h2",{onClick:function(){var t=S(e.state.recipe.ingredients);return e.setState({recipe:{ingredients:e.state.recipe.ingredients,name:e.state.recipe.name},nutrients:t})}},this.state.recipe.name),m.a.createElement("div",null,this.state.recipe.ingredients.map((function(t,a){return m.a.createElement(j,{name:t.name,hover:e.state.hover,ing:t,key:a,id:a,setMicros:function(t){e.setMicrosPerIngredient(t)},amount:t.amount,onChange:function(t){e.handleChange(t)},remove:function(t){return e.handleDelete(t)}})}))),m.a.createElement("div",{className:"row buttons"},m.a.createElement("div",{className:"col"},m.a.createElement("button",{className:"btn btn-block btn-primary",onClick:function(){return e.addIngredient()}},"Add Ingredient")),m.a.createElement("div",{className:"col"},m.a.createElement("button",{className:"btn btn-block btn-primary",draggable:!0,onDrag:function(t){return e.onDragRecipe(t)}},"Drag To Meal Plan")))),m.a.createElement("div",{className:"minimize",onClick:function(t){e.minimize(t)}},m.a.createElement("p",null,"M I N I M I Z E ","<")),m.a.createElement("div",{className:"col bargraphs ui-box"},m.a.createElement(N,{title:this.state.recipe.name,nutrients:this.state.nutrients,filterData:function(t,a){return e.filterCategories(t,a)},hideCategory:function(t){return e.hideCategory(t)}})),m.a.createElement("div",{className:"minimize",onClick:function(t){e.minimize(t)}},m.a.createElement("p",null,"M I N I M I Z E ","<"))),m.a.createElement("div",{className:"mealplan"},m.a.createElement(b,{onDrag:function(t){return e.onDragMeal(t)},onDrop:function(t,a){return e.onDropMeal(t,e.state.meal)},onDragOver:function(t){return e.onDragOver(t)},onClick:function(t,a){return e.deleteMeal(t,e.state.mealplan.meals)},mealPlanIngredients:function(t){return e.mealPlanIngredients(e.state.mealplan)},mealplan:this.state.mealplan,deleteRow:function(t,a){return e.deleteRow(t,a)}})))}}]),t}(m.a.Component);p.a.render(m.a.createElement(I,null),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.1f4c54d0.chunk.js.map